{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import app from\"../firebaseConfig.js\";import{getDatabase,ref,get}from'firebase/database';import{Link}from\"react-router-dom\";import logo from'../images/icon.png';import'./styles/BuscadorProyecto.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BuscarProyectoPorNombre(){const{usuarioID}=useParams();const[usuarioActual,setUsuarioActual]=useState(null);const[projects,setProjects]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[searchResults,setSearchResults]=useState([]);useEffect(()=>{//Traemos la información de dicho usuario específico\nconst fetchUsuario=async()=>{try{//Primero seteamos la base de datos como tal, checando directamente la id\nconst db=getDatabase(app);const dbRef=ref(db,\"usuarios/\".concat(usuarioID));//Tomamos la data directamente de dicho usuarioID\nconst snapshot=await get(dbRef);//Checamos si existe un snapshot con dicha información específica\nif(snapshot.exists()){//Extraemos la información del usuario del snapshot\nconst userData=snapshot.val();//Seteamos la data de usuario en nuestro estado global de usuario\nsetUsuarioActual(userData);}else{console.log(\"No se encontró un usuario con dicha información\");}}catch(error){console.error(\"Error consiguiendo la información del usuario\");}};fetchUsuario();},[usuarioID]);//Incluimos éste caso como dependencia para recorrer el efecto si hay cambios\nuseEffect(()=>{const fetchProjects=async()=>{try{const db=getDatabase(app);const projectsRef=ref(db,'proyectos');const snapshot=await get(projectsRef);if(snapshot.exists()){const projectData=snapshot.val();const projectList=Object.keys(projectData).map(myID=>{return{...projectData[myID],id:myID};});setProjects(projectList);console.log(\"Todos los proyectos como tal: \",projectList);}else{console.log('No projects found.');}}catch(error){console.error('Error fetching projects:',error);}};fetchProjects();},[]);useEffect(()=>{const results=projects.filter(project=>project.nombre.toLowerCase().includes(searchTerm.toLowerCase()));setSearchResults(results);},[searchTerm,projects]);const handleSearch=event=>{setSearchTerm(event.target.value);};if(!usuarioID||!usuarioActual){return/*#__PURE__*/_jsx(\"div\",{children:\"Cargando\"});}return/*#__PURE__*/_jsxs(\"section\",{className:\"Plataforma\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"Tab\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Proyex logo\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Bienvenido: \",usuarioActual.nombre]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{children:\" Cerrar Sesi\\xF3n \"}),\" \"]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"Buscador\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Buscar Proyecto por Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nombre del proyecto\",value:searchTerm,onChange:handleSearch})]}),/*#__PURE__*/_jsx(\"section\",{className:\"Mostrador\",children:/*#__PURE__*/_jsx(\"ul\",{children:searchResults.map(proyecto=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/Tareas/\".concat(usuarioID,\"/\").concat(proyecto.id),children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:proyecto.nombre}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Fecha de Deadline: \",proyecto.fecha]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"L\\xEDder:\"}),\" \",proyecto.lider]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Colaboradores:\"}),\" \",proyecto.colaboradores.join(', ')]})]})})},proyecto.id))})})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","app","getDatabase","ref","get","Link","logo","jsx","_jsx","jsxs","_jsxs","BuscarProyectoPorNombre","usuarioID","usuarioActual","setUsuarioActual","projects","setProjects","searchTerm","setSearchTerm","searchResults","setSearchResults","fetchUsuario","db","dbRef","concat","snapshot","exists","userData","val","console","log","error","fetchProjects","projectsRef","projectData","projectList","Object","keys","map","myID","id","results","filter","project","nombre","toLowerCase","includes","handleSearch","event","target","value","children","className","src","alt","type","placeholder","onChange","proyecto","to","fecha","lider","colaboradores","join"],"sources":["C:/Users/Usuario/Documents/GitHub/Gestionador-Proyectos-Grupal/frontend/src/components/BuscarProyecto.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport app from \"../firebaseConfig.js\";\r\nimport { getDatabase, ref, get } from 'firebase/database';\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport logo from '../images/icon.png';\r\nimport './styles/BuscadorProyecto.css';\r\n\r\nexport default function BuscarProyectoPorNombre() {\r\n    const { usuarioID } = useParams();\r\n    const [usuarioActual, setUsuarioActual] = useState(null);\r\n\r\n\r\n    const [projects, setProjects] = useState([]);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [searchResults, setSearchResults] = useState([]);\r\n\r\n    useEffect(() => {\r\n        //Traemos la información de dicho usuario específico\r\n        const fetchUsuario = async() => {\r\n            try {\r\n                //Primero seteamos la base de datos como tal, checando directamente la id\r\n                const db = getDatabase(app);\r\n                const dbRef = ref(db, `usuarios/${usuarioID}`);\r\n\r\n                //Tomamos la data directamente de dicho usuarioID\r\n                const snapshot = await get(dbRef);\r\n\r\n                //Checamos si existe un snapshot con dicha información específica\r\n                if (snapshot.exists()) {\r\n                    //Extraemos la información del usuario del snapshot\r\n                    const userData = snapshot.val();\r\n\r\n                    //Seteamos la data de usuario en nuestro estado global de usuario\r\n                    setUsuarioActual(userData);\r\n                }else{\r\n                    console.log(\"No se encontró un usuario con dicha información\")\r\n                }\r\n            }catch(error){\r\n                console.error(\"Error consiguiendo la información del usuario\")\r\n            }\r\n        };\r\n\r\n        fetchUsuario();\r\n    }, [usuarioID]); //Incluimos éste caso como dependencia para recorrer el efecto si hay cambios\r\n\r\n    useEffect(() => {\r\n        const fetchProjects = async () => {\r\n            try {\r\n                const db = getDatabase(app);\r\n                const projectsRef = ref(db, 'proyectos');\r\n                const snapshot = await get(projectsRef);\r\n                if (snapshot.exists()) {\r\n                    const projectData = snapshot.val();\r\n\r\n                    const projectList = Object.keys(projectData).map( myID => {\r\n                        return {\r\n                            ...projectData[myID],\r\n                            id: myID\r\n                        }\r\n                    });\r\n                    setProjects(projectList);\r\n                    console.log(\"Todos los proyectos como tal: \", projectList);\r\n                } else {\r\n                    console.log('No projects found.');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching projects:', error);\r\n            }\r\n        };\r\n\r\n        fetchProjects();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const results = projects.filter(project =>\r\n            project.nombre.toLowerCase().includes(searchTerm.toLowerCase())\r\n        );\r\n        setSearchResults(results);\r\n    }, [searchTerm, projects]);\r\n\r\n    const handleSearch = event => {\r\n        setSearchTerm(event.target.value);\r\n    };\r\n\r\n    if (!usuarioID || !usuarioActual){\r\n        return <div>Cargando</div>\r\n    }\r\n\r\n    return (\r\n        <section className=\"Plataforma\">\r\n            <section className='Tab'>\r\n                <div>\r\n                    <img src={logo} alt='Proyex logo'/>\r\n                    <label>Bienvenido: {usuarioActual.nombre}</label>\r\n                </div>\r\n                <div>\r\n                    {/*Creamos un botón con la función de cerrar sesión*/}\r\n                    <button> Cerrar Sesión </button> {/*Cerrar sesión  Log out*/}\r\n                </div>\r\n            </section>\r\n            <section className='Buscador'>\r\n                <h2>Buscar Proyecto por Nombre</h2>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Nombre del proyecto\"\r\n                    value={searchTerm}\r\n                    onChange={handleSearch}\r\n                />\r\n            </section>\r\n            <section className='Mostrador'>\r\n                <ul>\r\n                    {searchResults.map(proyecto => (\r\n                        <li key={proyecto.id}>\r\n                            <Link to={`/Tareas/${usuarioID}/${proyecto.id}`}>\r\n                                <div>\r\n                                    <h3>{proyecto.nombre}</h3>\r\n                                    <p>Fecha de Deadline: {proyecto.fecha}</p>\r\n                                    <p><strong>Líder:</strong> {proyecto.lider}</p>\r\n                                    <p><strong>Colaboradores:</strong> {proyecto.colaboradores.join(', ')}</p>\r\n                                </div>  \r\n                            </Link>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </section>\r\n            \r\n        </section>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}